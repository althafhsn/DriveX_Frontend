<div *ngIf="manager">
  <div class="card shadow-sm rounded p-4 position-relative">
    <!-- Edit/Save/Delete Buttons -->
    <div class="position-absolute top-0 end-0 m-2">
      <button class="btn btn-outline-primary me-2" (click)="toggleEdit()">
        {{ isEditable ? 'Save' : 'Edit' }}
      </button>
      <button class="btn btn-outline-danger" (click)="deleteManager()">
        Delete
      </button>
    </div>

    <!-- Manager Basic Info -->
    <div class="d-flex align-items-center mb-4">
      <img
        [src]="manager.image || 'default-avatar.png'"
        alt="Manager Avatar"
        class="rounded-circle border"
        style="width: 80px; height: 80px; object-fit: cover;"
      />
      <div class="ms-3">
        <h4 class="fw-bold mb-1">
          <span *ngIf="!isEditable">{{ manager.firstName }}</span>
          <input *ngIf="isEditable" [(ngModel)]="manager.firstName" class="form-control" />
        </h4>
        <h4 class="fw-bold mb-1">
          <span *ngIf="!isEditable">{{ manager.lastName }}</span>
          <input *ngIf="isEditable" [(ngModel)]="manager.lastName" class="form-control" />
        </h4>
        <p class="text-muted mb-0">ID: {{ manager.id }}</p>
      </div>
    </div>

    <div class="row text-center border-top pt-3">
      <div class="col-6 col-md-3 mb-3">
        <h5 class="fw-bold">
          <span *ngIf="!isEditable">{{ manager.nic }}</span>
          <input *ngIf="isEditable" [(ngModel)]="manager.nic" class="form-control" />
        </h5>
        <p class="small text-muted">NIC</p>
      </div>
      <div class="col-6 col-md-3 mb-3">
        <h5 class="fw-bold">
          <span *ngIf="!isEditable">{{ manager.role }}</span>
          <input *ngIf="isEditable" [(ngModel)]="manager.role" class="form-control" />
        </h5>
        <p class="small text-muted">Role</p>
      </div>
      <div class="col-6 col-md-3 mb-3">
        <h5 class="fw-bold">
          <span *ngIf="!isEditable">{{ manager.notes }}</span>
          <input *ngIf="isEditable" [(ngModel)]="manager.notes" class="form-control" />
        </h5>
        <p class="small text-muted">Notes</p>
      </div>
    </div>

    <!-- Addresses -->
    <div *ngFor="let address of manager.addresses" class="row text-center border-top pt-3">
      <div class="col-6 col-md-3 mb-3">
        <h5 class="fw-bold">
          <span *ngIf="!isEditable">{{ address.houseNo }}</span>
          <input *ngIf="isEditable" [(ngModel)]="address.houseNo" class="form-control" />
        </h5>
        <p class="small text-muted">House No</p>
      </div>
      <div class="col-6 col-md-3 mb-3">
        <h5 class="fw-bold">
          <span *ngIf="!isEditable">{{ address.street1 }}</span>
          <input *ngIf="isEditable" [(ngModel)]="address.street1" class="form-control" />
        </h5>
        <p class="small text-muted">Street 1</p>
      </div>
      <div class="col-6 col-md-3 mb-3">
        <h5 class="fw-bold">
          <span *ngIf="!isEditable">{{ address.city }}</span>
          <input *ngIf="isEditable" [(ngModel)]="address.city" class="form-control" />
        </h5>
        <p class="small text-muted">City</p>
      </div>
    </div>
    <button *ngIf="isEditable && manager.addresses.length < 2" class="btn btn-outline-primary mb-3" (click)="addAddress()">
      + Add Address
    </button>

    <!-- Phone Numbers -->
    <div *ngFor="let phone of manager.phoneNumbers" class="border-top pt-3">
      <p class="mb-2">
        <i class="fas fa-phone-alt text-primary me-2"></i>
        <span *ngIf="!isEditable">{{ phone.mobile1 }}</span>
        <input *ngIf="isEditable" [(ngModel)]="phone.mobile1" class="form-control" />
      </p>
    </div>
    <button *ngIf="isEditable && manager.phoneNumbers.length < 2" class="btn btn-outline-primary mb-3" (click)="addPhoneNumber()">
      + Add Phone Number
    </button>

    <!-- Email -->
    <p>
      <i class="fas fa-envelope text-primary me-2"></i>
      <span *ngIf="!isEditable">{{ manager.email }}</span>
      <input *ngIf="isEditable" [(ngModel)]="manager.email" class="form-control" />
    </p>
  </div>
</div>
